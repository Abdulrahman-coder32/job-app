<div *ngIf="loading" class="text-center py-12">
  <i class="fas fa-spinner fa-spin text-6xl text-primary mb-4"></i>
  <p class="text-xl text-gray-700">جاري تحميل المتقدمين...</p>
</div>

<div *ngIf="!loading && applications.length === 0" class="text-center py-16 bg-gray-50 rounded-xl border border-gray-200">
  <i class="fas fa-users-slash text-8xl text-gray-400 mb-6"></i>
  <p class="text-2xl font-medium text-gray-600 mb-2">مفيش متقدمين حاليًا</p>
  <p class="text-gray-500">لما يتقدم حد، هيظهر هنا فورًا!</p>
</div>

<div *ngIf="!loading && applications.length > 0" class="space-y-6">
  <div *ngFor="let app of applications" class="card p-6 flex flex-col md:flex-row md:items-center md:justify-between gap-6 border border-gray-200">
    <div class="flex-grow">
      <div class="flex items-center gap-4 mb-4">
        <div class="w-16 h-16 rounded-full bg-primary-light text-primary flex items-center justify-center text-2xl font-bold">
          {{ getInitials(app.seeker_id?.name) }}
        </div>
        <div>
          <h3 class="text-2xl font-bold text-gray-900">{{ app.seeker_id?.name || 'باحث عن عمل' }}</h3>
          <p class="text-gray-600">
            <i class="fas fa-map-marker-alt ml-1 text-primary"></i>
            {{ app.seeker_id?.city }}, {{ app.seeker_id?.governorate }}
          </p>
        </div>
      </div>

      <p class="text-gray-700 mb-4 leading-relaxed">{{ app.message }}</p>

      <div class="flex flex-wrap gap-4">
        <span class="px-4 py-2 rounded-full {{getStatusClass(app.status)}} flex items-center gap-2 font-medium">
          <i class="{{getStatusIcon(app.status)}}"></i>
          {{ app.status === 'pending' ? 'معلق' : app.status === 'accepted' ? 'مقبول' : 'مرفوض' }}
        </span>
        <span class="px-4 py-2 rounded-full bg-gray-100 text-gray-800 flex items-center gap-2">
          <i class="fas fa-clock"></i>
          {{ app.createdAt | date:'mediumDate' }}
        </span>
      </div>
    </div>

    <div class="flex flex-col sm:flex-row gap-3">
      <button *ngIf="app.status === 'pending'" (click)="acceptApplication(app._id)"
              class="btn-primary py-3 px-6 rounded-xl flex items-center justify-center gap-2 font-medium">
        <i class="fas fa-check"></i> قبول
      </button>
      <button *ngIf="app.status === 'pending'" (click)="rejectApplication(app._id)"
              class="btn-danger py-3 px-6 rounded-xl flex items-center justify-center gap-2 font-medium">
        <i class="fas fa-times"></i> رفض
      </button>
      <a *ngIf="app.status === 'accepted'" routerLink="/inbox/{{app._id}}"
         class="btn-primary py-3 px-6 rounded-xl flex items-center justify-center gap-2 font-medium">
        <i class="fas fa-comments"></i> فتح الدردشة
      </a>
    </div>
  </div>
</div>
